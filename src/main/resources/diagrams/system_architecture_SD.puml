@startuml
title Simplified Request Flow

actor Client
participant "Javalin\n(Routes)" as Javalin
participant "Controller\n(controllers)" as Controller
participant "Service\n(services)" as Service
participant "DAO\n(daos)" as DAO
database "Database" as DB

autonumber

Client -> Javalin: HTTP Request (e.g., GET /trips/1)
note right of Javalin
  Javalin runs security handlers
  (from 'security' package)
  before routing.
end note

Javalin -> Controller: handleGetTrip(ctx)
note right of Controller: Receives request data,\nvalidates input.
Controller -> Service: getTripById(1)
note right of Service: Contains business logic.
Service -> DAO: findById(1)
note right of DAO: Handles data persistence logic.
DAO -> DB: SQL via Hibernate/JPA
DB --> DAO: Returns Entity object
DAO --> Service: Returns Entity object
note right of Service: Maps Entity to DTO\n(using 'utils' or 'dtos' mappers).
Service --> Controller: Returns TripDTO
note right of Controller: Prepares final response.
Controller -> Javalin: ctx.json(tripDTO)
Javalin --> Client: HTTP 200 OK + JSON Payload

@enduml